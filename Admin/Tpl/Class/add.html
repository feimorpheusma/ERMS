<div class="pageContent">
    <form method="post" action="__URL__/insert/navTabId/listclass/callbackType/closeCurrent"
          enctype="multipart/form-data" class="pageForm required-validate"
          onsubmit="return iframeCallback(this,dialogAjaxDone);"><?php  //窗体组件采用这个 iframeCallback(this, navTabAjaxDone); ?>
        <div class="pageFormContent" layoutH="60">
            <dl>
                <dt>班级名称：</dt>
                <dd><input type="text" class="required" style="width:100%" name="name"/></dd>
            </dl>
            <dl>
                <dt>学院：</dt>
                <dd>
                    <{html_options name='cid' class="required" id='cid_add' options=$Colleges selected=$CollegeId}>
                </dd>
            </dl>
            <dl>
                <dt>专业：</dt>
                <dd>
                    <select name="mid" id="mid_add" class="valid required">
                        <option value="">请选择</option>
                        <{foreach $major_list as $vo}>
                        <option value="<{$vo.id}>" data-parentid="<{$vo.cid}>"><{$vo.name}></option>
                        <{/foreach}>
                    </select>
                </dd>
            </dl>
        </div>

        <div class="formBar">
            <ul>
                <li>
                    <div class="buttonActive">
                        <div class="buttonContent">
                            <button type="submit">保存</button>
                        </div>
                    </div>
                </li>
                <li>
                    <div class="button">
                        <div class="buttonContent">
                            <button type="button" class="close">取消</button>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </form>
</div>

<script type="text/javascript">
    $(function () {
        $("#cid_add").change(function () {
            $("#mid_add").val('');
            $("#mid_add").children("span").each(function () {
                $(this).children().clone().replaceAll($(this));         //use the content of the <span> replace the <span>
            });
            $("#mid_add").find('option').each(function () {
                if ($(this).data('parentid') != $("#cid_add").val() && $(this).val() != '') {
                    $(this).wrap("<span style='display:none'></span>");
                }
            });
        });
        $("#cid_add").change();
    });
</script>
